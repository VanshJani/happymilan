(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5378],{14045:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test",function(){return s(35064)}])},35064:function(e,t,s){"use strict";s.r(t);var o=s(85893),r=s(67294),a=s(86606),n=s.n(a),u=s(11163),i=s(47041),l=s(71508);t.default=()=>{let[e,t]=(0,r.useState)(""),a=(0,u.useRouter)();return(0,r.useEffect)(()=>{let e=async()=>{let e=s(97218);try{let s=await e.post("".concat("https://stag.mntech.website/api","/v1/user/auth/generate-qr")),{channel:o,token:r}=s.data.data;t(JSON.stringify({channel:o,token:r})),n().logToConsole=!0;let u=new(n())("46b85f99650ffbce8c4d",{cluster:"ap2"}),l=u.subscribe(o);return l.bind("login-event",function(e){(function(e){var t;let s=null==e?void 0:null===(t=e.authToken)||void 0===t?void 0:t.replace("Bearer ","");localStorage.setItem("personal",JSON.stringify(null==e?void 0:e.user));let o={userid:e.user.id,token:s,refreshToken:s,user:e.user.email,email:e.user.email,fullName:"".concat(e.user.firstName," ").concat(e.user.lastName),tokens:e.tokens};localStorage.setItem("authdata",JSON.stringify(o)),(0,i.setCookie)("userid",e.user.id,{secure:!0}),localStorage.setItem("token",null==e?void 0:e.authToken),localStorage.setItem("refoken",null==e?void 0:e.authToken),localStorage.setItem("user",e.user.email,{secure:!0}),localStorage.setItem("email",e.user.email),localStorage.setItem("mobilenumber",e.user.mobileNumber),localStorage.setItem("flName","".concat(e.user.firstName," ").concat(e.user.lastName)),(0,i.setCookie)("jwtToken",s,{secure:!0}),(0,i.setCookie)("authtoken",s,{secure:!0}),(0,i.setCookie)("email",e.user.email,{secure:!0}),(0,i.setCookie)("userName",e.user.name,{secure:!0}),(0,i.setCookie)("data",JSON.stringify(e.tokens),{secure:!0})})(e),setTimeout(()=>{a.push("/longterm/dashboard")},1e3)}),()=>{l.unbind_all(),l.unsubscribe(o),u.disconnect()}}catch(e){console.error("Error generating QR code:",e)}};e()},[]),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:e?(0,o.jsx)(l.Q,{value:e,size:120}):(0,o.jsx)("p",{children:"Loading...."})})})}},11163:function(e,t,s){e.exports=s(96885)}},function(e){e.O(0,[33,9774,2888,179],function(){return e(e.s=14045)}),_N_E=e.O()}]);