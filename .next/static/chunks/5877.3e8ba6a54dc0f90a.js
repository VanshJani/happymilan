"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5877],{65877:function(e,t,s){s.r(t);var o=s(85893),r=s(83501),a=s(9581),l=s(25675),n=s.n(l),i=s(67294),c=s(47041),d=s(32512),p=s(2664),h=s(7354),x=s(60530),f=s(99419);t.default=(0,p.$j)(e=>({formData:e.form.formData}),{updateFormData:h.Zv})(function(e){let{formData:t,updateFormData:s,openUpload:l,handleCloseUpload:h}=e,g={fontFamily:"Poppins",fontSize:"24px",fontStyle:"normal",fontWeight:"400",lineHeight:"32px"},m={fontFamily:"Poppins",fontSize:"15px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},u={fontFamily:"Poppins",fontSize:"16px",fontStyle:"normal",fontWeight:"400",lineHeight:"32px"},y={fontFamily:"Poppins",fontSize:"10px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},F={fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},[j,b]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=(0,c.getCookie)("userName");b(e)},[]);let[v,k]=(0,i.useState)(1),[w,N]=(0,i.useState)([]),{userProfile:S,status:P}=(0,p.v9)(e=>{var t;return null===(t=e.form)||void 0===t?void 0:t.formData}),C=(0,p.I0)(),H=()=>{h(),w.length>0||k(1)},T=(0,i.useCallback)(e=>{if(e.length>5){alert("Please select only 5 images");return}let o=Array.from(e).map((e,t)=>({id:t,key:e.name,contentType:e.type,data:URL.createObjectURL(e),isProfile:!1}));N(e=>[...e,...o]),e.forEach(e=>{let r=new FileReader;r.onabort=()=>console.log("file reading was aborted"),r.onerror=()=>console.log("file reading has failed"),r.onload=()=>{s({...t,userProfile:{...t.userProfile,images:[...o],bufferdata:URL.createObjectURL(e)}}),k(v+1)},r.readAsArrayBuffer(e)})},[]),B=()=>{let{getRootProps:e,getInputProps:t}=(0,d.uI)({onDrop:T});return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center space-y-[20px] w-[526px] h-[330px] dark:bg-[#242526] bg-[#F5F5F5] rounded-[10px]",children:[(0,o.jsx)("div",{...e(),children:(0,o.jsx)(n(),{alt:"drag-drop",width:63,height:44,src:"/loginassests/register-icons/Drag-Drop.svg"})}),(0,o.jsx)("input",{...t(),className:"hidden"}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"dark:text-[#FFF] text-[#000]",style:g,children:"Select Photos"}),(0,o.jsx)("p",{className:"dark:text-[#FFF] text-[#000]",style:u,children:"Or drag and drop a file"})]})]})})},z=e=>{let t=w.filter(t=>t.data!==e);N(t)},D=()=>{let{getRootProps:e,getInputProps:t}=(0,d.uI)({onDrop:T});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"w-[526px] h-[330px] bg-[#F5F5F5] dark:bg-[#242526] rounded-[10px]",children:(0,o.jsxs)("div",{className:"flex space-x-[20px]",children:[w.map((e,t)=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"cursor-pointer w-[150px] h-[150px] lg:w-[130px] lg:h-[130px] rounded-[10px] mt-[10px] ml-[10px]",style:{backgroundImage:"url(".concat(e.data,")"),backgroundSize:"cover",backgroundPosition:"center"},id:"photo-grid-item",children:(0,o.jsxs)("svg",{onClick:()=>z(e.data),className:"z-[1] cursor-pointer relative ml-[80%] lg:ml-[78%] mt-[5%]",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"black","fill-opacity":"0.4"}),(0,o.jsx)("path",{d:"M14.1111 10.3333V15.8889H9.66667V10.3333H14.1111ZM13.2778 7H10.5L9.94444 7.55556H8V8.66667H15.7778V7.55556H13.8333L13.2778 7ZM15.2222 9.22222H8.55556V15.8889C8.55556 16.5 9.05556 17 9.66667 17H14.1111C14.7222 17 15.2222 16.5 15.2222 15.8889V9.22222Z",fill:"white"})]})},t)})),(0,o.jsxs)("div",{className:"mt-[10px] h-[130px] w-[130px]  rounded-[10px] flex flex-col justify-center items-center dark:bg-[#303133]  bg-[#EBEBEB]",children:[(0,o.jsx)("div",{...e(),children:(0,o.jsx)(n(),{alt:"drag-drop",width:35,height:35,src:"/loginassests/register-icons/Drag-Drop.svg"})}),(0,o.jsx)("input",{...t(),className:"hidden"}),(0,o.jsxs)("div",{className:"text-center mt-[5px]",children:[(0,o.jsx)("h1",{className:"dark:text-[#FFF] text-[#000]",style:m,children:"Select Photos"}),(0,o.jsx)("p",{className:"dark:text-[#FFF] text-[#000]",style:y,children:"Or drag and drop a file"})]})]})]})})})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.Z,{open:l,onClose:h,className:"flex justify-center",children:(0,o.jsx)(a.Z,{className:"dark:bg-[#303133] ",children:(0,o.jsxs)("div",{className:"space-y-[20px]",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h1",{className:"dark:text-[#FFF]",style:{fontFamily:"Poppins",fontSize:"18px",fontStyle:"normal",fontWeight:"500",lineHeight:"normal"},children:"Upload Photo"})}),(0,o.jsx)("div",{children:(0,o.jsx)("img",{alt:"close-icon",onClick:H,className:"w-[24px] h-[24px] cursor-pointer",src:"/assests/social/close.svg"})})]}),(0,o.jsxs)("div",{className:"",children:[(()=>{switch(v){case 1:return(0,o.jsx)(B,{});case 2:return(0,o.jsx)(D,{});default:return null}})(),(0,o.jsxs)("div",{className:"pt-[20px] flex space-x-[28px] justify-center",children:[(0,o.jsx)("button",{style:F,onClick:H,className:"w-[126px] h-[44px] rounded-[24px] hover:bg-[#F3F8FF] bg-[#FFF] border-[1px] border-[#0F52BA] text-[#000]",children:"Close"}),(0,o.jsx)("button",{id:"grad-btn",style:F,onClick:()=>{k(v+1),2===v&&(h(),console.log(w),C((0,x.U)(S)),setTimeout(()=>{C((0,f.di)()),s({...t,userProfile:{...t.userProfile,images:[],bufferdata:""}}),N([])},2e3),k(1))},className:"w-[126px] h-[44px] rounded-[24px] bg-[#0F52BA] border-[1px] border-[#0F52BA] text-[#FFF]",children:"Publish"})]})]})]})})})})})},60530:function(e,t,s){s.d(t,{U:function(){return l}});var o=s(96319),r=s(82562),a=s(47041);let l=(0,o.hg)("register/ImageUpload",async(e,t)=>{try{t.dispatch((0,r.yI)()),e.images.forEach(t=>{let o=(0,a.getCookie)("authtoken");"video/mp4"==t.contentType?console.log("Video File"):console.log("Image File");let r={key:t.key,contentType:t.contentType,isProfilePic:t.isProfile,profileType:"video/mp4"==t.contentType?"profileVideo":"profileImage"},l={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(r)};fetch("".concat("https://stag.mntech.website/api","/v1/s3/presignedurl/"),l).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(o=>{console.log(JSON.stringify(o)),"Success"===o.status?(console.log("After Success",o.data.url),console.log("Buffer data : ",e.bufferdata),(0,a.getCookie)("authtoken"),fetch(t.data).then(e=>e.blob()).then(e=>{let r=new FormData;r.append("image",e);let a=s(97218),l={method:"put",maxBodyLength:1/0,url:o.data.url,headers:{"Content-Type":t.contentType,"x-amz-acl":"public-read"},data:e};a.request(l).then(e=>{console.log(JSON.stringify(e.data))}).catch(e=>{console.log(e)})}).catch(e=>{console.error("There was a problem with your fetch operation:",e)})):console.log("ERROR")}).catch(e=>{console.error("There was a problem with your fetch operation:",e)})}),console.log("Waiting for images..."),t.dispatch((0,r.mt)())}catch(e){t.dispatch((0,r.vp)())}})}}]);