"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7546,8722],{16609:function(e,t,s){var l=s(5867),a=s(14948);let i=(0,l.Z)(a.Z)(()=>({"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",height:"10px",width:"10px",borderRadius:"50%","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));t.Z=i},6576:function(e,t,s){s.r(t);var l=s(85893),a=s(93419),i=s(31536),n=s(23599),o=s(87357),r=s(67720),d=s(25675),c=s.n(d),p=s(67294),h=s(47041),x=s(53941),u=s(11163),g=s(37069),m=s(79118),C=s(16609);let f=e=>{let{userData:t,HandleOpenProfile:s,OpenReportModal:o}=e,[r,d]=p.useState(null),h=!!r,x=e=>{switch(e.name){case"viewprofile":s();break;case"block":console.log("block profile");break;case"report":o();break;default:return null}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c(),{id:"basic-button","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:e=>{d(e.currentTarget)},alt:"img",width:4,height:16,className:"cursor-pointer 2xl:w-auto 2xl:h-auto xl:w-[5px] xl:h-[14px]",src:"/assests/dashboard/chats/chat-more-icon.svg"}),(0,l.jsx)(a.Z,{id:"basic-menu",anchorEl:r,open:h,onClose:()=>{d(null)},MenuListProps:{"aria-labelledby":"basic-button"},style:{marginLeft:"-25px"},children:(0,l.jsx)(i.Z,{sx:{borderRadius:"20px",padding:"10px"},spacing:1,px:1,children:[{title:"View Profile",name:"viewprofile"},{title:"Report User",name:"report"}].map(e=>(0,l.jsx)(n.Z,{name:null==e?void 0:e.name,onClick:()=>x(e),children:e.title}))})})]})};t.default=()=>{let e=(0,m.s)(),t=(0,u.useRouter)(),{userData:s,updateUser:a}=(0,p.useContext)(x.S),[n,d]=(0,p.useState)(!1),v=(0,h.getCookie)("authtoken");null==e||e.on("typing",e=>{e.from!=v&&d(!0)}),null==e||e.on("stopTyping",e=>{d(!1)});let j=()=>{t.push("/longterm/dashboard/".concat(null==s?void 0:s.id))},[b,w]=(0,p.useState)(!1),[y,k]=(0,p.useState)({});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{p:2,sx:{width:"100%",backgroundColor:"#FFF",boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,l.jsx)(i.Z,{alignItems:"center",direction:"row",style:{marginLeft:"5px"},justifyContent:"space-between",sx:{width:"100%",height:"100%"},children:(0,l.jsxs)(i.Z,{direction:"row",spacing:2,children:[(0,l.jsx)(o.Z,{className:"cursor-pointer",onClick:j,children:(null==s?void 0:s.profilePic)?(0,l.jsx)(C.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",invisible:!(null==s?void 0:s.ActiveUser),children:(0,l.jsx)(c(),{loading:"lazy",width:47,height:47,alt:"profile-image",style:{objectFit:"cover",borderRadius:"50%"},className:"w-[47px] h-[47px]",src:null==s?void 0:s.profilePic})}):(0,l.jsx)(C.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",invisible:!(null==s?void 0:s.ActiveUser),children:(0,l.jsxs)("div",{className:"bg-[#F8FBFF] grid place-items-center",style:{height:"47px",width:"47px",borderRadius:"50%",objectFit:"cover"},children:[(0,l.jsx)(c(),{loading:"lazy",alt:"not-found",width:16,height:16,src:"/assests/dashboard/icon/NotFound-img.svg"}),(0,l.jsx)("h1",{className:"relative top-[-5px]",style:{color:"#B3CBF1",textAlign:"center",fontFamily:"Poppins",fontSize:"6px",fontStyle:"normal",fontWeight:"500",lineHeight:"normal"},children:"No Image"})]})})}),(0,l.jsxs)(i.Z,{spacing:0,style:{position:"relative",top:"1px"},children:[(0,l.jsx)("h1",{style:{color:"#000",fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"600",lineHeight:"normal"},children:null==s?void 0:s.userName}),(0,l.jsx)("p",{style:{color:"#0091FF",fontFamily:"Poppins",fontSize:"8px",fontStyle:"normal",fontWeight:"500",lineHeight:"normal"},children:n?"Typing...":(null==s?void 0:s.ActiveUser)?"Online":(0,l.jsx)("span",{className:"text-[#a6a6a6]",children:"Offline"})})]}),(0,l.jsx)(i.Z,{className:"",children:(0,l.jsx)("div",{className:"absolute right-10 mt-[10px]",children:(0,l.jsx)(f,{OpenReportModal:()=>{w(!0)},HandleOpenProfile:j,userData:s})})})]})})}),(0,l.jsx)(r.Z,{className:"mt-[0px] bg-[#e3e3e3]",sx:{backgroundColor:"#e3e3e3"}}),(0,l.jsx)(g.default,{title:"helo",isOpen:b,onClose:()=>{w(!1)}})]})}},9893:function(e,t,s){s.r(t);var l=s(85893),a=s(87357),i=s(5152),n=s.n(i);s(67294);let o=n()(()=>Promise.all([s.e(8307),s.e(2016)]).then(s.bind(s,63048)),{loadableGenerated:{webpack:()=>[63048]},ssr:!1});t.default=function(e){let{pickerRef:t,HandleEmojiSelect:s,openPicker:i}=e;return(0,l.jsx)(a.Z,{ref:t,sx:{display:i?"inline":"none",zIndex:10,position:"fixed",bottom:120,right:"auto"},children:(0,l.jsx)(o,{onEmojiClick:s})})}},64457:function(e,t,s){s.r(t);var l=s(85893),a=s(87357),i=s(31536),n=s(93946),o=s(15861),r=s(25675),d=s.n(r);s(67294),t.default=function(e){let{recordingDuration:t,HanldeVoiceChat:s,handleStopVoice:r}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.Z,{sx:{backgroundColor:"#FFF"},children:(0,l.jsxs)(i.Z,{fullWidth:!0,direction:"row",sx:{border:"1px solid #DADADA",borderRadius:"25px",paddingBottom:"8px",paddingTop:"8px",background:"#FFF"},children:[(0,l.jsx)(n.Z,{sx:{marginLeft:"20px"},className:"animate-pulse",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16",fill:"none",children:(0,l.jsx)("path",{d:"M5.89474 10.1053C7.29263 10.1053 8.41263 8.97684 8.41263 7.57895L8.42105 2.52632C8.42105 1.12842 7.29263 0 5.89474 0C4.49684 0 3.36842 1.12842 3.36842 2.52632V7.57895C3.36842 8.97684 4.49684 10.1053 5.89474 10.1053ZM10.3579 7.57895C10.3579 10.1053 8.21895 11.8737 5.89474 11.8737C3.57053 11.8737 1.43158 10.1053 1.43158 7.57895H0C0 10.4505 2.29053 12.8253 5.05263 13.2379V16H6.73684V13.2379C9.49895 12.8337 11.7895 10.4589 11.7895 7.57895H10.3579Z",fill:"#FF0000"})})}),(0,l.jsxs)(o.Z,{variant:"p",sx:{display:"grid",width:"50px",placeItems:"center",paddingLeft:"10px",position:"relative",top:"1px"},children:["0:",t]}),(0,l.jsx)(n.Z,{sx:{marginRight:"auto",position:"absolute",right:"100px"},className:"   w-[35px] h-[35px]",onClick:r,children:(0,l.jsx)(d(),{width:30,height:30,alt:"stop",src:"/assests/chat/stop-red-icon.png"})})]})})})}},11552:function(e,t,s){s.r(t);var l=s(85893),a=s(87357),i=s(31536),n=s(93946),o=s(67294),r=s(25675),d=s.n(r),c=s(47041),p=s(2664),h=s(64457),x=s(53941),u=s(7354),g=s(9893),m=s(64858),C=s(87066),f=s(79118),v=s(62599);let j=e=>{var t;let{HandleStopVoice:s,HanldeVoiceChat:n,setOpenPicker:r,StartVoice:u,socket:g,message:m,handleSendMessage:C,setMessage:f,updateFormData:v,formData:j}=e,{imagesdata:b,bufferdata:w}=(0,p.v9)(e=>e.form.formData.uploadChatImage),{userData:y,updateUser:k}=(0,o.useContext)(x.S),F=async e=>{let t=(0,c.getCookie)("userid"),s=y.id;g.emit("typing",{from:t,to:s}),"Enter"===e.key&&(console.log("Hello"),C())},[Z,L]=(0,o.useState)(0);return((0,o.useEffect)(()=>{let e;return u?e=setInterval(()=>{L(e=>e+1)},1e3):(clearInterval(e),L(0)),()=>clearInterval(e)},[u]),u)?(0,l.jsx)(h.default,{handleStopVoice:s,handleVoiceChat:n,recordingDuration:Z}):(0,l.jsx)(a.Z,{sx:{backgroundColor:"#FFF",borderRadius:"10px"},children:(0,l.jsxs)(i.Z,{sx:{backgroundColor:"#ECECEC",borderRadius:"25px"},children:[(0,l.jsxs)(i.Z,{sx:{display:""==w?"none":"",paddingLeft:"10px",borderRadius:"10px 10px 0 0",paddingTop:"10px",paddingBottom:"10px",height:"100%",backgroundColor:"#ECECEC"},children:[(0,l.jsxs)("svg",{onClick:()=>{v({...j,uploadChatImage:{imagesdata:"",bufferdata:"",CaptionText:""}})},className:"z-[1] cursor-pointer absolute ml-[90px] mt-[10px]",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"black","fill-opacity":"0.4"}),(0,l.jsx)("path",{d:"M14.1111 10.3333V15.8889H9.66667V10.3333H14.1111ZM13.2778 7H10.5L9.94444 7.55556H8V8.66667H15.7778V7.55556H13.8333L13.2778 7ZM15.2222 9.22222H8.55556V15.8889C8.55556 16.5 9.05556 17 9.66667 17H14.1111C14.7222 17 15.2222 16.5 15.2222 15.8889V9.22222Z",fill:"white"})]}),(null==b?void 0:null===(t=b.contentType)||void 0===t?void 0:t.startsWith("video"))?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("video",{width:100,height:100,controls:!0,style:{objectFit:"cover",borderRadius:"10px",height:"120px",width:"120px"},children:[(0,l.jsx)("source",{src:w,type:null==b?void 0:b.contentType}),"Your browser does not support the video tag."]})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d(),{loading:"lazy",width:100,height:100,alt:"user-image",style:{objectFit:"cover",borderRadius:"10px",height:"120px",width:"120px"},src:w})})]}),(0,l.jsx)("input",{style:{border:"1px solid #DADADA",paddingLeft:"50px",paddingTop:"12px",paddingBottom:"12px",borderRadius:"25px",backgroundColor:"#FFF"},onKeyDown:F,onBlur:()=>{let e=(0,c.getCookie)("userid"),t=y.id;g.emit("stopTyping",{from:e,to:t})},value:m,fullWidth:!0,onChange:e=>f(e.target.value),placeholder:"Write a message...",variant:"filled"}),(0,l.jsx)("span",{className:"absolute bottom-[70px] ml-[24px]",onClick:()=>{r(e=>!e)},children:(0,l.jsx)("svg",{className:"ml-[-10px]",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,l.jsx)("path",{d:"M13.6803 8.46153C14.0259 8.46153 14.318 8.34056 14.5566 8.09861C14.7952 7.85665 14.9145 7.56284 14.9145 7.21719C14.9145 6.87155 14.7936 6.57942 14.5516 6.34081C14.3096 6.10221 14.0158 5.98292 13.6702 5.98292C13.3245 5.98292 13.0324 6.10389 12.7938 6.34583C12.5552 6.5878 12.4359 6.8816 12.4359 7.22725C12.4359 7.5729 12.5569 7.86503 12.7988 8.10364C13.0408 8.34223 13.3346 8.46153 13.6803 8.46153ZM6.32981 8.46153C6.67545 8.46153 6.96758 8.34056 7.20619 8.09861C7.44481 7.85665 7.56411 7.56284 7.56411 7.21719C7.56411 6.87155 7.44313 6.57942 7.20117 6.34081C6.9592 6.10221 6.6654 5.98292 6.31975 5.98292C5.9741 5.98292 5.68197 6.10389 5.44336 6.34583C5.20477 6.5878 5.08547 6.8816 5.08547 7.22725C5.08547 7.5729 5.20644 7.86503 5.44839 8.10364C5.69035 8.34223 5.98416 8.46153 6.32981 8.46153ZM10 15.4274C11.0598 15.4274 12.036 15.135 12.9284 14.5502C13.8209 13.9655 14.4915 13.1895 14.9402 12.2222H13.8333C13.4259 12.9074 12.8843 13.4491 12.2083 13.8472C11.5324 14.2454 10.7963 14.4444 10 14.4444C9.2037 14.4444 8.46759 14.2454 7.79167 13.8472C7.11574 13.4491 6.57407 12.9074 6.16667 12.2222H5.05983C5.50854 13.1895 6.17912 13.9655 7.07158 14.5502C7.96403 15.135 8.94017 15.4274 10 15.4274ZM10.0037 20C8.62089 20 7.3208 19.7376 6.10344 19.2128C4.88609 18.688 3.82716 17.9757 2.92664 17.0761C2.02614 16.1764 1.31324 15.1185 0.787944 13.9023C0.262648 12.6861 0 11.3865 0 10.0037C0 8.62089 0.262398 7.3208 0.787195 6.10344C1.31201 4.88609 2.02425 3.82716 2.92392 2.92664C3.82358 2.02614 4.88152 1.31324 6.09772 0.787945C7.31394 0.262649 8.61346 0 9.99628 0C11.3791 0 12.6792 0.262398 13.8966 0.787194C15.1139 1.31201 16.1728 2.02425 17.0734 2.92392C17.9739 3.82358 18.6868 4.88152 19.2121 6.09772C19.7374 7.31394 20 8.61346 20 9.99628C20 11.3791 19.7376 12.6792 19.2128 13.8966C18.688 15.1139 17.9757 16.1728 17.0761 17.0734C16.1764 17.9739 15.1185 18.6868 13.9023 19.2121C12.6861 19.7374 11.3865 20 10.0037 20ZM10 18.8889C12.4815 18.8889 14.5833 18.0278 16.3056 16.3056C18.0278 14.5833 18.8889 12.4815 18.8889 10C18.8889 7.51852 18.0278 5.41667 16.3056 3.69444C14.5833 1.97222 12.4815 1.11111 10 1.11111C7.51852 1.11111 5.41667 1.97222 3.69444 3.69444C1.97222 5.41667 1.11111 7.51852 1.11111 10C1.11111 12.4815 1.97222 14.5833 3.69444 16.3056C5.41667 18.0278 7.51852 18.8889 10 18.8889Z",fill:"black"})})})]})})};t.default=(0,p.$j)(e=>({formData:e.form.formData}),{updateFormData:u.Zv})(e=>{let{formData:t,updateFormData:s}=e,[r,h]=(0,o.useState)(""),[u,b]=(0,o.useState)(!1),[w,y]=(0,o.useState)(!1),k=(0,o.useRef)(null),F=(0,o.useRef)([]),Z=(0,c.getCookie)("userid"),{userData:L,updateUser:H}=(0,o.useContext)(x.S),{imagesdata:N,bufferdata:V}=(0,p.v9)(e=>e.form.formData.uploadChatImage),S=(0,f.s)(),M=(0,o.useRef)(null),B=e=>{M.current&&!M.current.contains(e.target)&&b(!1)};(0,o.useEffect)(()=>(document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}),[]),(0,o.useEffect)(()=>{h("")},[L,H]);let R=()=>{let e=(0,c.getCookie)("authtoken"),l=v.io.connect("".concat("https://stag.mntech.website"),{path:"/api/socket.io",query:{token:e}});if(l.on("connect",()=>{console.log("Connected to socket")}),!Z){console.error("User not logged in");return}if(V){console.log("Sending image or video"),s({...t,uploadChatImage:{...t.uploadChatImage,CaptionText:r}});let e={from:Z,to:L.id,message:r||"",fileName:N.key,type:(null==N?void 0:N.contentType.startsWith("video"))?"video":"image"},a={from:Z,to:L.id,fileName:N.key,type:(null==N?void 0:N.contentType.startsWith("video"))?"video":"image"};l.emit("uploadContent",r?e:a);let i=e=>{console.log("Socket message received"),"messages received"!==e.data.message&&fetch(N.data).then(e=>e.blob()).then(t=>{var s;let a={method:"put",maxBodyLength:1/0,url:null===(s=e.data)||void 0===s?void 0:s.result.url,headers:{"Content-Type":null==N?void 0:N.contentType,"x-amz-acl":"public-read"},data:t};C.Z.request(a).then(()=>{let e={from:Z,to:null==L?void 0:L.id,message:r||"",fileName:null==N?void 0:N.key,type:(null==N?void 0:N.contentType.startsWith("video"))?"video":"image"};l.emit("sendMessage",e),I(),h("")}).catch(e=>{console.error(e),I(),h("")})}).catch(e=>{console.error("Error fetching blob:",e),I(),h("")})};l.off("message",i),l.on("message",i)}else if(""!==r.trim()){console.log("Sending text message");let e={to:null==L?void 0:L.id,from:Z,message:r};S.emit("sendMessage",e),h("")}},I=()=>{s({uploadChatImage:{imagesdata:"",bufferdata:"",CaptionText:""}})},z=async()=>{if(w)E();else{y(!0);try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});k.current=new MediaRecorder(e),k.current.ondataavailable=e=>F.current.push(e.data),k.current.start()}catch(e){console.error("Error accessing microphone:",e),y(!1)}}},A=()=>{if(0===F.current.length)return;console.log("Audio-chunk",F.current);let e=new Blob(F.current,{type:"audio/webm"}),t={from:Z,to:L.id,fileName:"audio.webm",type:"audio"};S.emit("uploadContent",t),S.on("message",t=>{var s,l;if(!(null===(l=t.data)||void 0===l?void 0:null===(s=l.result)||void 0===s?void 0:s.url)){console.error("Missing upload URL in response!");return}let a=t.data.result.url,i={method:"put",maxBodyLength:1/0,url:a,headers:{"Content-Type":e.type,"x-amz-acl":"public-read"},data:e};C.Z.request(i).then(()=>{let t={from:Z,to:L.id,message:r,fileName:"audio",type:e.type};S.emit("sendMessage",t),h(""),F.current=[]}).catch(e=>{console.error("Error uploading blob:",e)})})},E=()=>{k.current&&"recording"===k.current.state&&(k.current.stop(),k.current.onstop=()=>{A(),k.current.stream.getTracks().forEach(e=>e.stop()),k.current=null,F.current=[],y(!1)})};return(0,o.useEffect)(()=>()=>{k.current&&(k.current.stream.getTracks().forEach(e=>e.stop()),k.current=null)},[]),(0,l.jsxs)(a.Z,{p:2,sx:{width:"100%",backgroundColor:"#FFF"},children:[(0,l.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,l.jsxs)(i.Z,{sx:{background:"none",width:"100%"},children:[(0,l.jsx)(g.default,{pickerRef:M,HandleEmojiSelect:e=>{h(t=>t+e.emoji)},openPicker:u}),(0,l.jsx)(j,{HandleStopVoice:E,HanldeVoiceChat:z,formData:t,updateFormData:s,socket:S,StartVoice:w,handleSendMessage:R,setMessage:h,message:r,setOpenPicker:b})]}),(0,l.jsx)(a.Z,{sx:{height:48,width:48,borderRadius:1.5},children:(0,l.jsx)(i.Z,{sx:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(n.Z,{onClick:w?E:R,children:(0,l.jsx)(d(),{loading:"lazy",alt:"send-message",width:29,height:24,src:"/assests/chat/Send-Icon.svg"})})})})]}),(0,l.jsx)(i.Z,{children:(0,l.jsx)("div",{className:"chat-input-list-items",children:(0,l.jsx)("div",{className:"mt-[20px] ml-[10px]",children:(0,l.jsxs)("ul",{className:"flex space-x-[30px]",children:[(0,l.jsx)("li",{children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"20",viewBox:"0 0 23 20",fill:"none",children:(0,l.jsx)("path",{d:"M11.2464 15.8221C12.5244 15.8221 13.5978 15.3878 14.4663 14.5192C15.3349 13.6506 15.7693 12.5773 15.7693 11.2993C15.7693 10.0212 15.3349 8.94912 14.4663 8.08294C13.5978 7.21675 12.5244 6.78366 11.2464 6.78366C9.96834 6.78366 8.89622 7.21675 8.03003 8.08294C7.16384 8.94912 6.73075 10.0212 6.73075 11.2993C6.73075 12.5773 7.16384 13.6506 8.03003 14.5192C8.89622 15.3878 9.96834 15.8221 11.2464 15.8221ZM11.2464 14.8606C10.2328 14.8606 9.38702 14.5204 8.70912 13.8402C8.03125 13.1599 7.69231 12.3129 7.69231 11.2993C7.69231 10.2857 8.03125 9.43991 8.70912 8.76203C9.38702 8.08414 10.2328 7.74519 11.2464 7.74519C12.26 7.74519 13.107 8.08414 13.7873 8.76203C14.4675 9.43991 14.8077 10.2857 14.8077 11.2993C14.8077 12.3129 14.4675 13.1599 13.7873 13.8402C13.107 14.5204 12.26 14.8606 11.2464 14.8606ZM1.73075 20C1.2504 20 0.841844 19.8316 0.505094 19.4949C0.168364 19.1582 0 18.7496 0 18.2692V4.32931C0 3.85015 0.168364 3.4419 0.505094 3.10456C0.841844 2.76723 1.2504 2.59856 1.73075 2.59856H5.72356L8.02884 0H14.4712L16.7764 2.59856H20.7693C21.2484 2.59856 21.6567 2.76723 21.994 3.10456C22.3313 3.4419 22.5 3.85015 22.5 4.32931V18.2692C22.5 18.7496 22.3313 19.1582 21.994 19.4949C21.6567 19.8316 21.2484 20 20.7693 20H1.73075ZM20.7693 19.0385C20.9936 19.0385 21.1779 18.9664 21.3221 18.8221C21.4664 18.6779 21.5385 18.4936 21.5385 18.2692V4.32931C21.5385 4.12098 21.4664 3.9407 21.3221 3.78847C21.1779 3.63622 20.9936 3.56009 20.7693 3.56009H16.3341L14.0288 0.961531H8.47116L6.16588 3.56009H1.73075C1.5064 3.56009 1.3221 3.63622 1.17788 3.78847C1.03365 3.9407 0.961531 4.12098 0.961531 4.32931V18.2692C0.961531 18.4936 1.03365 18.6779 1.17788 18.8221C1.3221 18.9664 1.5064 19.0385 1.73075 19.0385H20.7693Z",fill:"black"})})}),(0,l.jsx)(m.default,{updateFormData:s,formData:t}),(0,l.jsx)("li",{className:"cursor-pointer",onClick:z,children:w?(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"20",viewBox:"0 0 14 20",fill:"none",children:[(0,l.jsx)("path",{d:"M7 11.4286C6.34188 11.4286 5.78847 11.2088 5.33975 10.7692C4.89103 10.3297 4.66667 9.78754 4.66667 9.14286V2.28571C4.66667 1.64103 4.89103 1.09891 5.33975 0.659344C5.78847 0.219782 6.34188 0 7 0C7.65812 0 8.21153 0.219782 8.66025 0.659344C9.10897 1.09891 9.33333 1.64103 9.33333 2.28571V9.14286C9.33333 9.78754 9.10897 10.3297 8.66025 10.7692C8.21153 11.2088 7.65812 11.4286 7 11.4286ZM6.41667 20V15.9802C4.58889 15.8161 3.0625 15.0843 1.8375 13.7846C0.6125 12.485 0 10.9377 0 9.14286H1.16667C1.16667 10.7238 1.73542 12.0714 2.87292 13.1857C4.01042 14.3 5.38611 14.8571 7 14.8571C8.61389 14.8571 9.98958 14.3 11.1271 13.1857C12.2646 12.0714 12.8333 10.7238 12.8333 9.14286H14C14 10.9377 13.3875 12.485 12.1625 13.7846C10.9375 15.0843 9.41111 15.8161 7.58333 15.9802V20H6.41667ZM7 10.2857C7.33056 10.2857 7.60764 10.1762 7.83125 9.95714C8.05486 9.7381 8.16667 9.46667 8.16667 9.14286V2.28571C8.16667 1.9619 8.05486 1.69048 7.83125 1.47143C7.60764 1.25238 7.33056 1.14286 7 1.14286C6.66944 1.14286 6.39236 1.25238 6.16875 1.47143C5.94514 1.69048 5.83333 1.9619 5.83333 2.28571V9.14286C5.83333 9.46667 5.94514 9.7381 6.16875 9.95714C6.39236 10.1762 6.66944 10.2857 7 10.2857Z",fill:"url(#paint0_linear_607_216)"}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"paint0_linear_607_216",x1:"4.01326e-07",y1:"-8.5",x2:"14",y2:"23",gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopColor:"#0F52BA"}),(0,l.jsx)("stop",{offset:"1",stopColor:"#8225AF"})]})})]}):(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"20",viewBox:"0 0 14 20",fill:"none",children:(0,l.jsx)("path",{d:"M7 11.4286C6.34188 11.4286 5.78847 11.2088 5.33975 10.7692C4.89103 10.3297 4.66667 9.78754 4.66667 9.14286V2.28571C4.66667 1.64103 4.89103 1.09891 5.33975 0.659344C5.78847 0.219782 6.34188 0 7 0C7.65812 0 8.21153 0.219782 8.66025 0.659344C9.10897 1.09891 9.33333 1.64103 9.33333 2.28571V9.14286C9.33333 9.78754 9.10897 10.3297 8.66025 10.7692C8.21153 11.2088 7.65812 11.4286 7 11.4286ZM6.41667 20V15.9802C4.58889 15.8161 3.0625 15.0843 1.8375 13.7846C0.6125 12.485 0 10.9377 0 9.14286H1.16667C1.16667 10.7238 1.73542 12.0714 2.87292 13.1857C4.01042 14.3 5.38611 14.8571 7 14.8571C8.61389 14.8571 9.98958 14.3 11.1271 13.1857C12.2646 12.0714 12.8333 10.7238 12.8333 9.14286H14C14 10.9377 13.3875 12.485 12.1625 13.7846C10.9375 15.0843 9.41111 15.8161 7.58333 15.9802V20H6.41667ZM7 10.2857C7.33056 10.2857 7.60764 10.1762 7.83125 9.95714C8.05486 9.7381 8.16667 9.46667 8.16667 9.14286V2.28571C8.16667 1.9619 8.05486 1.69048 7.83125 1.47143C7.60764 1.25238 7.33056 1.14286 7 1.14286C6.66944 1.14286 6.39236 1.25238 6.16875 1.47143C5.94514 1.69048 5.83333 1.9619 5.83333 2.28571V9.14286C5.83333 9.46667 5.94514 9.7381 6.16875 9.95714C6.39236 10.1762 6.66944 10.2857 7 10.2857Z",fill:"black"})})})]})})})})]})})},47546:function(e,t,s){s.r(t);var l=s(85893),a=s(31536),i=s(87357),n=s(67294),o=s(6576),r=s(11552),d=s(75550),c=s(59974),p=s(2664),h=s(49033),x=s(53941);s(60812),t.default=function(e){let{UserDetails:t}=e,s=(0,p.I0)(),u=(0,p.v9)(e=>e.chatSafetyConsent.safetyConsent),{userData:g,updateUser:m}=(0,n.useContext)(x.S);return(0,n.useEffect)(()=>{s((0,h.u)(g.id))},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(a.Z,{height:"100%",maxHeight:"100vh",width:"auto",children:[(0,l.jsx)(o.default,{}),(null==u?void 0:u.data)&&u.data.length>0&&u.data.some(e=>!e.primaryConsent)||(null==u?void 0:u.data.length)===0?(0,l.jsx)(i.Z,{className:"bg-[#FFF] w-full h-full grid place-items-center",children:(0,l.jsx)(c.default,{UserDetails:t})}):(0,l.jsx)(i.Z,{id:"sidebarScroll",className:"bg-[#FFF] scrollbar",width:"100%",sx:{flexGrow:1,height:"100vh",overflowY:"scroll"},children:(0,l.jsx)(d.default,{menu:!0})}),(0,l.jsx)(r.default,{})]})})}},64858:function(e,t,s){s.r(t);var l=s(85893),a=s(67294),i=s(31297),n=s(32512),o=s(2664),r=s(53941),d=s(75277),c=s(87357),p=s(96263);t.default=function(e){let{formData:t,updateFormData:s,handleSendMessage:h,setMessage:x}=e,{userData:u}=(0,a.useContext)(r.S),{settings:g}=(0,p.g)(),{isMinimized:m}=g,[C,f]=(0,a.useState)(!1),v=()=>f(!1),j=(0,o.I0)(),b=(0,a.useCallback)(e=>{if(e.length>1){alert("Please select only one file");return}let t=e[0],l=null==u?void 0:u.id;j((0,i.k4)({userId:l,isVisible:!0}));let a={id:null==t?void 0:t.name,key:null==t?void 0:t.name,contentType:null==t?void 0:t.type,data:URL.createObjectURL(t),isProfile:!1};s({uploadChatImage:{imagesdata:a,bufferdata:URL.createObjectURL(t)}}),v()},[j,s,null==u?void 0:u.id]),{getRootProps:w,getInputProps:y}=(0,n.uI)({onDrop:b,maxFiles:1});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},BackdropProps:{style:{opacity:0}},open:C,onClose:v,sx:{outline:"none"},style:{outline:"none"},children:(0,l.jsx)(c.Z,{sx:{position:"absolute",bottom:"110px",right:m?void 0:"230px",left:m?"340px":void 0,height:"150px",width:"200px",background:"#FFF",boxShadow:"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",borderRadius:"10px"},children:(0,l.jsxs)("ul",{className:"flex flex-col justify-evenly  h-full pl-[5px] pr-[5px]",children:[(0,l.jsxs)("li",{...w(),className:"p-[10px]  rounded-[10px] hover:bg-[#F1F6FF] cursor-pointer",children:[(0,l.jsx)("input",{...y(),type:"file",className:"cursor-pointer opacity-0 w-[11px] absolute"}),(0,l.jsxs)("div",{className:"flex space-x-[20px]",children:[(0,l.jsx)("div",{className:"w-[20px] h-[20px]",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}),(0,l.jsx)("span",{children:"Image"})]})]}),(0,l.jsxs)("li",{...w(),className:"p-[10px]  rounded-[10px] hover:bg-[#F1F6FF] cursor-pointer",children:[(0,l.jsx)("input",{...y(),type:"file",className:"cursor-pointer opacity-0 w-[11px] absolute"}),(0,l.jsxs)("div",{className:"flex space-x-[20px]",children:[(0,l.jsx)("div",{className:"w-[20px] h-[20px]",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"})})}),(0,l.jsx)("span",{children:"Video"})]})]}),(0,l.jsx)("li",{className:"p-[10px]  rounded-[10px] hover:bg-[#F1F6FF] cursor-pointer",children:(0,l.jsxs)("div",{className:"flex space-x-[20px]",children:[(0,l.jsx)("div",{className:"w-[20px] h-[20px]",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"})})}),(0,l.jsx)("span",{children:"Audio"})]})})]})})}),(0,l.jsx)("li",{className:"cursor-pointer",onClick:()=>{f(!0),s({uploadChatImage:{imagesdata:"",bufferdata:""}})},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"20",viewBox:"0 0 11 20",fill:"none",children:(0,l.jsx)("path",{d:"M11 14.55C11 16.0694 10.4625 17.3576 9.3875 18.4145C8.3125 19.4715 7.01667 20 5.5 20C3.98333 20 2.6875 19.4792 1.6125 18.4375C0.5375 17.3958 -1.69746e-07 16.1167 -2.36042e-07 14.6L-7.05939e-07 3.85C-7.52218e-07 2.79125 0.379533 1.88489 1.1386 1.13092C1.89768 0.376974 2.81018 -1.22837e-07 3.8761 -1.6943e-07C4.94203 -2.16023e-07 5.85417 0.376974 6.6125 1.13092C7.37083 1.88489 7.75 2.79125 7.75 3.85L7.75 13.725C7.75 14.362 7.53216 14.9004 7.09648 15.3402C6.66079 15.7801 6.12746 16 5.49648 16C4.86549 16 4.33333 15.7708 3.9 15.3125C3.46667 14.8542 3.25 14.3083 3.25 13.675L3.25 3.85L4.25 3.85L4.25 13.7C4.25 14.05 4.36938 14.3542 4.60813 14.6125C4.84686 14.8708 5.14269 15 5.49563 15C5.84854 15 6.14583 14.875 6.3875 14.625C6.62917 14.375 6.75 14.075 6.75 13.725L6.75 3.85C6.75 3.052 6.47259 2.3775 5.91777 1.8265C5.36297 1.2755 4.68381 1 3.88027 1C3.07676 1 2.39583 1.2755 1.8375 1.8265C1.27917 2.3775 0.999999 3.052 0.999999 3.85L1 14.65C1 15.8667 1.44062 16.8958 2.32187 17.7375C3.20313 18.5792 4.2625 19 5.5 19C6.75 19 7.8125 18.5708 8.6875 17.7125C9.5625 16.8542 10 15.8083 10 14.575L10 3.85L11 3.85L11 14.55Z",fill:"black"})})})]})}},88722:function(e,t,s){s.r(t);var l=s(85893),a=s(25675),i=s.n(a),n=s(11163);s(67294),t.default=function(e){let{IconSize:t,BtnSizeH:s,BtnSizeW:a}=e,o=(0,n.useRouter)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("button",{id:"grad-btn",onClick:()=>o.push("/longterm/dashboard/upgrade"),style:{fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal",height:s,width:a},className:"hover:opacity-90 text-[#FFF] mr-[2px] text-center flex items-center justify-center w-[".concat(a,"px] h-[").concat(s,"px] bg-[#0F52BA] rounded-[22px]"),children:["Upgrade",(0,l.jsx)(i(),{loading:"lazy",alt:"img",width:t,height:t,className:"pl-[5px]",src:"/assests/dashboard/icon/crown-icon.svg"})]})})}},59974:function(e,t,s){s.r(t);var l=s(85893),a=s(67294),i=s(2664),n=s(49033),o=s(47041),r=s(53941);t.default=function(e){let{UserDetails:t}=e,[s,d]=(0,a.useState)(0),c=(0,i.v9)(e=>e.chatSafetyConsent.safetyConsent),{userData:p,updateUser:h}=(0,a.useContext)(r.S),x=(0,i.I0)(),u=(0,o.getCookie)("userid");return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-full h-full grid place-items-center ",children:(0,l.jsx)("div",{className:"2xl:w-[333px] 2xl:h-[272px] xl:w-[300px] xl:h-[200px] lg:w-[300px] lg:h-[200px] w-[333px] h-[272px]  rounded-[14px] border-[1px] border-[#E5BDF8] bg-[#FAF0FF]",children:(0,l.jsxs)("div",{className:"w-full h-full flex flex-col items-center space-y-[31px]",id:"Tips-content",children:[(0,l.jsx)("div",{className:"mt-[25px]",children:(0,l.jsxs)("ul",{className:"flex space-x-[9px]",children:[(0,l.jsx)("li",{children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",children:[(0,l.jsx)("path",{d:"M7.66667 0H7V3H7.66667V0Z",fill:"black"}),(0,l.jsx)("path",{d:"M3.9328 0.799967L3.35547 1.1333L4.85547 3.7313L5.4328 3.39797L3.9328 0.799967Z",fill:"black"}),(0,l.jsx)("path",{d:"M1.15755 3.38678L0.824219 3.96411L3.42222 5.46411L3.75555 4.88678L1.15755 3.38678Z",fill:"black"}),(0,l.jsx)("path",{d:"M3 7H0V7.66667H3V7Z",fill:"black"}),(0,l.jsx)("path",{d:"M3.39908 9.23278L0.800781 10.7322L1.13398 11.3096L3.73228 9.81018L3.39908 9.23278Z",fill:"black"}),(0,l.jsx)("path",{d:"M11.2435 9.20489L10.9102 9.78223L13.5082 11.2822L13.8415 10.7049L11.2435 9.20489Z",fill:"black"}),(0,l.jsx)("path",{d:"M14.668 7H11.668V7.66667H14.668V7Z",fill:"black"}),(0,l.jsx)("path",{d:"M13.4925 3.35962L10.8945 4.85962L11.2279 5.43695L13.8259 3.93695L13.4925 3.35962Z",fill:"black"}),(0,l.jsx)("path",{d:"M10.7064 0.824552L9.20703 3.42285L9.78443 3.75605L11.2838 1.15775L10.7064 0.824552Z",fill:"black"}),(0,l.jsx)("path",{d:"M8.1 15.1L7.86667 15.3333H6.8L6.56667 15.1C6.5 15.0333 6.43333 15 6.33333 15H6V15.6667H6.2L6.43333 15.9C6.5 15.9667 6.56667 16 6.66667 16H8C8.1 16 8.16667 15.9667 8.23333 15.9L8.46667 15.6667H8.66667V15H8.33333C8.23333 15 8.16667 15.0333 8.1 15.1Z",fill:"black"}),(0,l.jsx)("path",{d:"M9.33203 12.3335H5.33203V13.0002H9.33203V12.3335Z",fill:"black"}),(0,l.jsx)("path",{d:"M9.33203 13.6665H5.33203V14.3332H9.33203V13.6665Z",fill:"black"}),(0,l.jsx)("path",{d:"M7.33464 3.6665C5.3013 3.6665 3.66797 5.29984 3.66797 7.33317C3.66797 8.33317 4.06797 9.29984 4.8013 9.99984C5.13464 10.3665 5.33464 10.8332 5.33464 11.3332V11.6665H6.0013V11.3332C6.0013 10.6665 5.76797 9.99984 5.26797 9.49984C4.66797 8.93317 4.33464 8.1665 4.33464 7.33317C4.33464 5.6665 5.66797 4.33317 7.33464 4.33317C9.0013 4.33317 10.3346 5.6665 10.3346 7.33317C10.3346 8.1665 10.0013 8.93317 9.4013 9.49984C8.9013 9.99984 8.66797 10.6665 8.66797 11.3332V11.6665H9.33464V11.3332C9.33464 10.8332 9.53464 10.3665 9.86797 9.99984C10.6013 9.29984 11.0013 8.33317 11.0013 7.33317C11.0013 5.29984 9.36797 3.6665 7.33464 3.6665Z",fill:"black"}),(0,l.jsx)("path",{d:"M6.99961 11.6668H7.66628V9.46676L8.56628 8.56676L8.09961 8.1001L7.33294 8.86676L6.56628 8.1001L6.09961 8.56676L6.99961 9.46676V11.6668Z",fill:"black"}),(0,l.jsx)("path",{d:"M7.66667 5.33333C7.66667 5.13333 7.53333 5 7.33333 5C6.03333 5 5 6.03333 5 7.33333C5 7.53333 5.13333 7.66667 5.33333 7.66667C5.53333 7.66667 5.66667 7.53333 5.66667 7.33333C5.66667 6.4 6.4 5.66667 7.33333 5.66667C7.53333 5.66667 7.66667 5.53333 7.66667 5.33333Z",fill:"black"})]})}),(0,l.jsx)("li",{style:{color:"#000",textAlign:"center",fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"500",lineHeight:"normal"},children:"Safety Tips"})]})}),(0,l.jsx)("div",{children:(0,l.jsx)("ul",{children:(0,l.jsx)("li",{className:"w-[279px]",style:{color:"#000",textAlign:"center",fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},children:(()=>{switch(s){case 0:return"Do not share your mobile number, personal details, bank detail or address until trust has been established.";case 1:return"Avoid meeting at unknown places. If you choose to go, inform a trusted person about your plans.";case 2:return"Share your live location with your parents for easy tracking during difficult times."}})()})})}),(0,l.jsx)("div",{className:"flex space-x-[9px]",children:[0,1,2].map(e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"rounded-[50%] w-[10px] h-[10px] bg-[#8225AF] ".concat(s==e?"":"opacity-[0.1]")})}))}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"".concat(s>=2?"w-[147px]":"w-[73px]"," h-[34px] bg-[#0F52BA] rounded-[23px] text-[#FFF]"),onClick:()=>{if(s>=2){d(0);let e={senderId:u,receiverId:p.id,primaryConsent:!0};x((0,n.a)(e))}else d(s+1)},children:(null==c?void 0:c.loading)?"Loading..":s>=2?"I agree, start chat":"Next"})})]})})})})}},60812:function(e,t,s){s.r(t);var l=s(85893),a=s(67294),i=s(88722),n=s(31536),o=s(87357),r=s(25675),d=s.n(r),c=s(2664),p=s(11163),h=s(91168);t.default=function(e){let t={color:"#000",textAlign:"center",fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"};return s=>{let r=(0,c.I0)(),x=(0,p.useRouter)(),{hasPlan:u,status:g}=(0,c.v9)(e=>e.auth);return((0,a.useEffect)(()=>{"idle"===g&&r((0,h.kg)())},[r,g]),(0,a.useEffect)(()=>{},[u,x,g]),"loading"===g)?(0,l.jsx)("p",{children:"Loading..."}):u?(0,l.jsx)(e,{...s}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.Z,{className:"bg-[#FFF] w-full h-full grid place-items-center",children:(0,l.jsxs)(o.Z,{className:"grid place-items-center space-y-[10px]",children:[(0,l.jsx)(d(),{width:0,height:0,alt:"lock",src:"/assests/profile/Lock-gradient.svg",loading:"lazy",className:"w-[18.151px] h-[24px]"}),(0,l.jsx)("h1",{style:t,children:"Upgrade to send & receive messages."}),(0,l.jsx)(i.default,{IconSize:17,BtnSizeH:40,BtnSizeW:110})]})})})}}},49033:function(e,t,s){s.d(t,{a:function(){return n},u:function(){return i}});var l=s(47041),a=s(77484);let i=e=>async t=>{t({type:a.qRu});let i=s(97218),n=(0,l.getCookie)("authtoken"),o={method:"get",maxBodyLength:1/0,url:"".concat("https://stag.mntech.website/api","/v1/user/message-consent/get-message-consent/").concat(e),headers:{Authorization:"Bearer ".concat(n)}};i.request(o).then(e=>{console.log(JSON.stringify(e.data)),t({type:a.FR3,payload:e.data})}).catch(e=>{console.log(e),t({type:a.eFm})})},n=e=>async t=>{t({type:a.rZC});let i=s(97218),n=(0,l.getCookie)("authtoken"),o=JSON.stringify(e);i.request({method:"post",maxBodyLength:1/0,url:"".concat("https://stag.mntech.website/api","/v1/user/message-consent/create-message-consent"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},data:o}).then(e=>{console.log(JSON.stringify(e.data)),t({type:a.m1s,payload:e.data})}).catch(e=>{console.log(e),t({type:a.eUi})})}}}]);