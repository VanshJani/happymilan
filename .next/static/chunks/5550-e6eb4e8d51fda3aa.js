"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5550],{75550:function(e,t,s){s.r(t),s.d(t,{default:function(){return H}});var r=s(85893),i=s(87357),n=s(31536),l=s(67294),a=s(15861),o=s(93946),d=s(23795),c=s(93419),x=s(23599),u=s(2734),h=s(30381),p=s.n(h),g=s(25675),m=s.n(g),j=s(53941),f=s(79118),b=e=>{let t=Date.now()-e;return t<36e5?p()(e).fromNow():p()(e).format("LT")};let v={color:"#000",fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},w=[{title:"Reply"},{title:"Report"},{title:"Delete Message"}],y=e=>{let{el:t,menu:s}=e,l=(0,u.Z)();return(0,r.jsx)(n.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:t.incoming?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m(),{alt:"img",width:40,height:40,className:"mr-[10px] w-[40px] h-[40px] ml-[5px] 2xl:w-[40px] 2xl:h-[40px] xl:w-[40px] xl:h-[40px]",src:"/assests/dashboard/request/req-6.svg"}),(0,r.jsx)(i.Z,{p:1.5,sx:{backgroundColor:(t.incoming,"#EAEAEA"),borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:2,children:[(0,r.jsxs)(n.Z,{p:2,spacing:3,direction:"row",alignItems:"center",sx:{backgroundColor:l.palette.background.paper,borderRadius:1},children:[(0,r.jsx)(a.Z,{style:v,variant:"caption",children:"Abstract.png"}),(0,r.jsx)(o.Z,{children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-arrow-down-to-line",children:[(0,r.jsx)("path",{d:"M12 17V3"}),(0,r.jsx)("path",{d:"m6 11 6 6 6-6"}),(0,r.jsx)("path",{d:"M19 21H5"})]})})]}),(0,r.jsx)(a.Z,{style:v,variant:"body2",sx:{color:t.incoming?l.palette.text:"#fff"},children:t.message})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{p:1.5,sx:{backgroundColor:t.incoming?l.palette.background.default:"#EAEAEA",borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:2,children:[(0,r.jsxs)(n.Z,{p:2,spacing:3,direction:"row",alignItems:"center",sx:{backgroundColor:l.palette.background.paper,borderRadius:1},children:[(0,r.jsx)(a.Z,{style:v,variant:"caption",children:"Abstract.png"}),(0,r.jsx)(o.Z,{children:(0,r.jsx)("span",{children:"Download Icon"})})]}),(0,r.jsx)(a.Z,{style:v,variant:"body2",sx:{color:t.incoming?l.palette.text:"#fff"},children:t.message})]})}),(0,r.jsx)(m(),{alt:"img",width:40,height:40,className:" w-[40px] h-[40px] ml-[5px] 2xl:w-[40px] 2xl:h-[40px] xl:w-[40px] xl:h-[40px]",src:"/assests/dashboard/request/req-6.svg"})]})})},C=e=>{let{el:t,menu:s}=e,l=(0,u.Z)();return(0,r.jsx)(n.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:t.incoming?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m(),{alt:"img",width:40,height:40,className:"mr-[10px] w-[40px] h-[40px] ml-[5px] 2xl:w-[40px] 2xl:h-[40px] xl:w-[40px] xl:h-[40px]",src:"/assests/dashboard/request/req-6.svg"}),(0,r.jsx)(i.Z,{p:1.5,sx:{backgroundColor:t.incoming?l.palette.background.default:"#EAEAEA",borderRadius:1.5,width:"max-content"},children:(0,r.jsx)(n.Z,{spacing:2,children:(0,r.jsxs)(n.Z,{p:2,spacing:3,alignItems:"start",sx:{backgroundColor:l.palette.background.paper,borderRadius:1},children:[(0,r.jsx)("img",{src:t.preview,alt:t.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,r.jsxs)(n.Z,{spacing:2,children:[(0,r.jsx)(a.Z,{style:v,variant:"subtitle2",children:"Creating Chat App"}),(0,r.jsx)(a.Z,{style:v,variant:"subtitle2",sx:{color:l.palette.primary.main},component:d.Z,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),(0,r.jsx)(a.Z,{style:v,variant:"body2",color:t.incoming?l.palette.text:"#fff",children:t.message})]})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{p:1.5,sx:{backgroundColor:t.incoming?l.palette.background.default:l.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,r.jsx)(n.Z,{spacing:2,children:(0,r.jsxs)(n.Z,{p:2,spacing:3,alignItems:"start",sx:{backgroundColor:l.palette.background.paper,borderRadius:1},children:[(0,r.jsx)("img",{src:t.preview,alt:t.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,r.jsxs)(n.Z,{spacing:2,children:[(0,r.jsx)(a.Z,{style:v,variant:"subtitle2",children:"Creating Chat App"}),(0,r.jsx)(a.Z,{style:v,variant:"subtitle2",sx:{color:l.palette.primary.main},component:d.Z,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),(0,r.jsx)(a.Z,{style:v,variant:"body2",color:t.incoming?l.palette.text:"#fff",children:t.message})]})})}),(0,r.jsx)(m(),{alt:"img",width:40,height:40,className:"mr-[10px] w-[40px] h-[40px] ml-[5px] 2xl:w-[40px] 2xl:h-[40px] xl:w-[40px] xl:h-[40px]",src:"/assests/dashboard/request/req-6.svg"})]})})},Z=e=>{let{el:t,menu:s}=e,l=(0,u.Z)();return(0,r.jsx)(n.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:(0,r.jsx)(i.Z,{p:1.5,sx:{backgroundColor:t.incoming?l.palette.background.default:"#EAEAEA",borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:2,children:[(0,r.jsx)(n.Z,{p:2,direction:"column",spacing:3,alignItems:"center",sx:{backgroundColor:l.palette.background.paper,borderRadius:1},children:(0,r.jsx)(a.Z,{style:v,variant:"body2",color:l.palette.text,children:t.message})}),(0,r.jsx)(a.Z,{style:v,variant:"body2",color:t.incoming?l.palette.text:"#000",children:t.reply})]})})})},k=e=>{let{menu:t,userMessage:s,Outgoing:o,sendAt:d,Top:c,setTop:x,onDeleteMessage:u}=e,h=(e=>{let t=Date.now()-e;return t<36e5?p()(e).fromNow():p()(e).format("HH:mm")})(d),g={color:"#C8C8C8",fontFamily:"Poppins",fontSize:"10px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},j=(0,l.useRef)();(0,l.useEffect)(()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s.message]);let f=(0,l.useRef)(null);return(0,r.jsx)(r.Fragment,{children:o?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.Z,{id:"Chat-scroll-bar",ref:j,direction:"row",justifyContent:"end",children:[(0,r.jsx)(i.Z,{p:2,sx:{backgroundColor:"#F8E8FF",borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:1,children:[(0,r.jsx)(m(),{id:"chat-image",ref:f,onClick:()=>{f.current.requestFullscreen?f.current.requestFullscreen():f.current.mozRequestFullScreen?f.current.mozRequestFullScreen():f.current.webkitRequestFullscreen?f.current.webkitRequestFullscreen():f.current.msRequestFullscreen&&f.current.msRequestFullscreen()},width:0,height:0,src:s.fileUrl,style:{cursor:"pointer",objectFit:"cover",maxHeight:210,borderRadius:"10px"},alt:"Description",quality:45,layout:"responsive",loading:"lazy"}),(0,r.jsxs)(n.Z,{direction:"col",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(a.Z,{style:v,variant:"body2",color:"#000",children:s.message.length>65?(0,r.jsxs)(r.Fragment,{children:[s.message.slice(0,65)," ",(0,r.jsx)("br",{})," ",s.message.slice(65)]}):s.message}),(0,r.jsx)(a.Z,{className:"pl-[20px]",style:g,variant:"body2",color:"#000",children:h})]})]})}),(0,r.jsx)(E,{data:s,onDeleteMessage:u})]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Z,{id:"Chat-scroll-bar",ref:j,direction:"row",justifyContent:"start",children:(0,r.jsx)(i.Z,{p:2,sx:{backgroundColor:"#E1EDFF",borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:1,children:[(0,r.jsx)(m(),{width:0,height:0,src:s.fileUrl,sizes:"max-height: 210px",style:{objectFit:"cover",maxHeight:210,borderRadius:"10px"},alt:"Description",quality:45,layout:"responsive",loading:"lazy"}),(0,r.jsxs)(n.Z,{direction:"col",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(a.Z,{style:v,variant:"body2",color:"#000",children:s.message}),(0,r.jsx)(a.Z,{style:g,variant:"body2",color:"#000",children:h})]})]})})})})})},F=e=>{let{menu:t,userMessage:s,Outgoing:o,sendAt:d,Top:c,setTop:x,onDeleteMessage:u}=e,h=(e=>{let t=Date.now()-e;return t<36e5?p()(e).fromNow():p()(e).format("HH:mm")})(d),g={color:"#C8C8C8",fontFamily:"Poppins",fontSize:"10px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},m=(0,l.useRef)();return(0,l.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s.message]),(0,l.useRef)(null),(0,r.jsx)(r.Fragment,{children:o?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.Z,{id:"Chat-scroll-bar",ref:m,direction:"row",justifyContent:"end",children:[(0,r.jsx)(i.Z,{p:2,sx:{backgroundColor:"#F8E8FF",borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:1,children:[(0,r.jsx)("video",{id:"chat-video",width:"100%",height:"auto",src:s.fileUrl,style:{cursor:"pointer",objectFit:"cover",maxHeight:210,borderRadius:"10px"},alt:"Description",quality:45,controls:!0,preload:"metadata",children:"Your browser does not support the video tag."}),(0,r.jsxs)(n.Z,{direction:"col",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(a.Z,{style:v,variant:"body2",color:"#000",children:s.message.length>65?(0,r.jsxs)(r.Fragment,{children:[s.message.slice(0,65)," ",(0,r.jsx)("br",{})," ",s.message.slice(65)]}):s.message}),(0,r.jsx)(a.Z,{className:"pl-[20px]",style:g,variant:"body2",color:"#000",children:h})]})]})}),(0,r.jsx)(E,{data:s,onDeleteMessage:u})]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Z,{id:"Chat-scroll-bar",ref:m,direction:"row",justifyContent:"start",children:(0,r.jsx)(i.Z,{p:2,sx:{backgroundColor:"#E1EDFF",borderRadius:1.5,width:"max-content"},children:(0,r.jsxs)(n.Z,{spacing:1,children:[(0,r.jsx)("video",{id:"chat-video",width:"100%",height:"auto",src:s.fileUrl,style:{cursor:"pointer",objectFit:"cover",maxHeight:210,borderRadius:"10px"},alt:"Description",quality:45,controls:!0,preload:"metadata",children:"Your browser does not support the video tag."}),(0,r.jsxs)(n.Z,{direction:"col",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(a.Z,{style:v,variant:"body2",color:"#000",children:s.message}),(0,r.jsx)(a.Z,{style:g,variant:"body2",color:"#000",children:h})]})]})})})})})},R=e=>{var t,s;let{el:o,Outgoing:d,userMessage:c,sendAt:x,onDeleteMessage:u}=e,h={color:"#000",fontFamily:"Poppins",fontSize:"10px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal",Opacity:"0.6"},p=(0,l.useRef)();(0,l.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[c.message]);let[g,j]=(0,l.useState)(!1),f=()=>{j(!g)},v=(null==c?void 0:null===(t=c.message)||void 0===t?void 0:t.length)>80,w=g?null==c?void 0:c.message:null==c?void 0:null===(s=c.message)||void 0===s?void 0:s.substring(0,80);return(0,r.jsx)(r.Fragment,{children:d?(0,r.jsxs)(n.Z,{ref:p,id:"Chat-scroll-bar",direction:"row",justifyContent:"end",children:[(0,r.jsx)(i.Z,{p:2,sx:{backgroundColor:"#F8E8FF",borderRadius:"18px",maxWidth:"50%",wordWrap:"break-word",wordBreak:"break-word",overflowWrap:"break-word"},children:(0,r.jsxs)(a.Z,{variant:"body2",color:"#000",children:[w,v&&(0,r.jsxs)("span",{onClick:f,style:{color:"blue",cursor:"pointer"},children:[(0,r.jsx)("br",{}),g?" Show less":"...Read more"]}),(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[(0,r.jsx)("div",{className:"p-[5px] text-right",children:(0,r.jsx)("h1",{style:h,children:b(x)})}),(0,r.jsx)("div",{children:(0,r.jsx)(m(),{width:15,height:15,src:"/assests/chat/receive-tick.svg",loading:"lazy",alt:"receive"})})]})]})}),(0,r.jsx)(i.Z,{children:(0,r.jsx)(E,{onDeleteMessage:u,data:c})})]}):(0,r.jsx)(n.Z,{id:"Chat-scroll-bar",ref:p,direction:"row",justifyContent:"start",children:(0,r.jsx)(i.Z,{p:2,sx:{backgroundColor:"#E1EDFF",borderRadius:"18px",maxWidth:"50%",wordWrap:"break-word",wordBreak:"break-word",overflowWrap:"break-word"},children:(0,r.jsxs)(a.Z,{variant:"body2",color:"#000",children:[w,v&&(0,r.jsx)("span",{onClick:f,style:{color:"blue",cursor:"pointer"},children:g?" Show less":"...Read more"}),(0,r.jsx)("div",{className:"flex items-center justify-start",children:(0,r.jsx)("div",{className:"p-[5px] text-right",children:(0,r.jsx)("h1",{style:h,children:b(x)})})})]})})})})},E=e=>{let{data:t,onDeleteMessage:s}=e,i=(0,f.s)(),[a,o]=l.useState(null),d=!!a,u=e=>{if("Delete Message"==e.title){s(t.id);let e={from:t.from,to:t.to,messageId:t.id,messageDeletedAll:!0};i.emit("DeleteMessage",e),i.emit("getLastConversation",{from:t.from,to:t.to}),i.emit("getLastConversation",{to:t.from,from:t.to}),o(null)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{id:"basic-button","aria-controls":d?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:e=>{o(e.currentTarget)},size:10,xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-ellipsis-vertical",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,r.jsx)("circle",{cx:"12",cy:"5",r:"1"}),(0,r.jsx)("circle",{cx:"12",cy:"19",r:"1"})]}),(0,r.jsx)(c.Z,{id:"basic-menu",anchorEl:a,open:d,onClose:()=>{o(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,r.jsx)(n.Z,{spacing:1,px:1,children:w.map(e=>(0,r.jsx)(x.Z,{onClick:()=>u(e),children:e.title}))})})]})},A=e=>{let{el:t,Outgoing:s,userMessage:i,sendAt:a,onDeleteMessage:o}=e,{userData:d,updateUser:c}=(0,l.useContext)(j.S),[x,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(0),[g,m]=(0,l.useState)(0),f=(0,l.useRef)(null),b=()=>{f.current&&(f.current.play(),u(!0))},v=()=>{f.current&&(f.current.pause(),u(!1))},w=()=>{x?v():b()},y=()=>{if(f.current){let e=f.current.currentTime,t=f.current.duration;p(isFinite(e)?e:0),m(isFinite(t)?t:0)}},C=e=>{f.current&&(f.current.currentTime=e.target.value,p(e.target.value))};function Z(e){let t=Math.floor(e%60).toString().padStart(2,"0");return"".concat(Math.floor(e/60),":").concat(t)}return(0,l.useEffect)(()=>{let e=f.current,t=()=>{e&&m(isFinite(e.duration)?e.duration:0)};return e&&(e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",y)),()=>{e&&(e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",y))}},[]),(0,r.jsx)(r.Fragment,{children:s?(0,r.jsxs)(n.Z,{id:"Chat-scroll-bar",direction:"row",sx:{marginRight:"10px"},justifyContent:"end",children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#F8E8FF",width:"261px",height:"53px",paddingLeft:"10px",paddingRight:"10px",borderRadius:"10px"},children:[(0,r.jsx)("div",{className:"",style:{marginLeft:"10px"},children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,r.jsx)("path",{d:"M5.05013 21.8167H2.2168C1.60291 21.8167 1.09527 21.616 0.69388 21.2146C0.292491 20.8132 0.0917969 20.3056 0.0917969 19.6917V10.9083C0.0917969 9.39722 0.37513 7.98056 0.941797 6.65833C1.50846 5.33611 2.28763 4.17917 3.2793 3.1875C4.27096 2.19583 5.42791 1.41667 6.75013 0.85C8.07235 0.283333 9.48902 0 11.0001 0C12.5112 0 13.9279 0.283333 15.2501 0.85C16.5724 1.41667 17.7293 2.19583 18.721 3.1875C19.7126 4.17917 20.4918 5.33611 21.0585 6.65833C21.6251 7.98056 21.9085 9.39722 21.9085 10.9083V19.6917C21.9085 20.3056 21.7078 20.8132 21.3064 21.2146C20.905 21.616 20.3974 21.8167 19.7835 21.8167H16.9501V13.8833H20.9168V10.9083C20.9168 8.14583 19.9546 5.80243 18.0303 3.87812C16.106 1.95382 13.7626 0.991667 11.0001 0.991667C8.23763 0.991667 5.89423 1.95382 3.96992 3.87812C2.04562 5.80243 1.08346 8.14583 1.08346 10.9083V13.8833H5.05013V21.8167ZM4.05846 14.875H1.08346V19.6917C1.08346 19.975 1.20152 20.2347 1.43763 20.4708C1.67374 20.7069 1.93346 20.825 2.2168 20.825H4.05846V14.875ZM17.9418 14.875V20.825H19.7835C20.0668 20.825 20.3265 20.7069 20.5626 20.4708C20.7987 20.2347 20.9168 19.975 20.9168 19.6917V14.875H17.9418Z",fill:"url(#paint0_linear_607_198)"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"paint0_linear_607_198",x1:"-2.5",y1:"-5.5",x2:"22",y2:"26.5",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#0F52BA"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#8225AF"})]})})]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{id:"audio-button",onClick:w,children:(0,r.jsx)("span",{children:x?(0,r.jsx)("img",{src:"/assests/song/Pause-icon.svg"}):(0,r.jsx)("img",{src:"/assests/song/Play-icon.svg"})})})}),(0,r.jsxs)("div",{id:"audioStack",className:"pt-[15px]",style:{position:"relative",right:"5px"},children:[(0,r.jsx)("input",{type:"range",id:"AudioRange",min:"0",max:g,value:h,onChange:C}),(0,r.jsx)("audio",{ref:f,src:null==i?void 0:i.fileUrl}),(0,r.jsxs)("div",{direction:"row",className:"flex justify-between text-[10px]",children:[(0,r.jsx)("p",{children:Z(h)}),(0,r.jsx)("p",{children:Z(g)})]})]})]}),(0,r.jsx)(E,{data:i,onDeleteMessage:o})]}):(0,r.jsx)(n.Z,{id:"Chat-scroll-bar",direction:"row",justifyContent:"start",children:(0,r.jsx)(n.Z,{id:"Chat-scroll-bar",direction:"row",sx:{marginRight:"10px"},justifyContent:"end",children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#E1EDFF",width:"261px",height:"53px",paddingLeft:"10px",paddingRight:"10px",borderRadius:"10px"},children:[(0,r.jsx)("div",{className:"",style:{marginLeft:"10px"},children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,r.jsx)("path",{d:"M5.05013 21.8167H2.2168C1.60291 21.8167 1.09527 21.616 0.69388 21.2146C0.292491 20.8132 0.0917969 20.3056 0.0917969 19.6917V10.9083C0.0917969 9.39722 0.37513 7.98056 0.941797 6.65833C1.50846 5.33611 2.28763 4.17917 3.2793 3.1875C4.27096 2.19583 5.42791 1.41667 6.75013 0.85C8.07235 0.283333 9.48902 0 11.0001 0C12.5112 0 13.9279 0.283333 15.2501 0.85C16.5724 1.41667 17.7293 2.19583 18.721 3.1875C19.7126 4.17917 20.4918 5.33611 21.0585 6.65833C21.6251 7.98056 21.9085 9.39722 21.9085 10.9083V19.6917C21.9085 20.3056 21.7078 20.8132 21.3064 21.2146C20.905 21.616 20.3974 21.8167 19.7835 21.8167H16.9501V13.8833H20.9168V10.9083C20.9168 8.14583 19.9546 5.80243 18.0303 3.87812C16.106 1.95382 13.7626 0.991667 11.0001 0.991667C8.23763 0.991667 5.89423 1.95382 3.96992 3.87812C2.04562 5.80243 1.08346 8.14583 1.08346 10.9083V13.8833H5.05013V21.8167ZM4.05846 14.875H1.08346V19.6917C1.08346 19.975 1.20152 20.2347 1.43763 20.4708C1.67374 20.7069 1.93346 20.825 2.2168 20.825H4.05846V14.875ZM17.9418 14.875V20.825H19.7835C20.0668 20.825 20.3265 20.7069 20.5626 20.4708C20.7987 20.2347 20.9168 19.975 20.9168 19.6917V14.875H17.9418Z",fill:"url(#paint0_linear_607_198)"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"paint0_linear_607_198",x1:"-2.5",y1:"-5.5",x2:"22",y2:"26.5",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#0F52BA"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#8225AF"})]})})]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{id:"audio-button",onClick:w,children:(0,r.jsx)("span",{children:x?(0,r.jsx)("img",{src:"../assests/song/Pause-icon.svg"}):(0,r.jsx)("img",{src:"../assests/song/Play-icon.svg"})})})}),(0,r.jsxs)("div",{id:"audioStack",className:"pt-[15px]",style:{position:"relative",right:"5px"},children:[(0,r.jsx)("input",{type:"range",id:"AudioRange",min:"0",max:g,value:h,onChange:C}),(0,r.jsx)("audio",{ref:f,src:null==i?void 0:i.fileUrl}),(0,r.jsxs)("div",{direction:"row",className:"flex justify-between text-[10px]",children:[(0,r.jsx)("p",{children:Z(h)}),(0,r.jsx)("p",{children:Z(g)})]})]})]})})})})};var M=s(47041),H=()=>{let[e,t]=(0,l.useState)([]),s=(0,M.getCookie)("userid"),{userData:a}=(0,l.useContext)(j.S),o=(0,f.s)(),d=(0,l.useRef)(null);(0,l.useEffect)(()=>{t([])},[a]);let c=e=>{t(t=>t.filter(t=>t.id!==e))};(0,l.useEffect)(()=>{if(o)return o.emit("getLastConversation",{from:s,to:a.id}),o.emit("getLastConversation",{to:s,from:a.id}),o.on("message",e=>{var s,r;(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)==="file upload url generated"&&t(t=>{var s;return[...t,null===(s=e.data)||void 0===s?void 0:s.chatMessage]}),(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.message)==="messages received"&&t(t=>{let s=e.data.sendMessage.results.filter(e=>!t.some(t=>t.id===e.id));return[...t,...s].sort((e,t)=>new Date(e.sendAt)-new Date(t.sendAt))})}),()=>{o.off("message"),o.off("getLastConversation")}},[o,s,a]);let x=e=>{let t=e.reduce((e,t)=>{let s;let r=p()(t.sendAt).startOf("day"),i=p()().startOf("day");return e[s=r.isSame(i,"day")?"Today":r.isSame(i.subtract(1,"days"),"day")?"Yesterday":r.format("MMMM D, YYYY")]||(e[s]=[]),e[s].push(t),e},{});return Object.keys(t).map(e=>({label:e,messages:t[e]}))},u=()=>{d.current.scrollTop};(0,l.useEffect)(()=>{let e=d.current;return null==e||e.addEventListener("scroll",u),()=>{null==e||e.removeEventListener("scroll",u)}},[]);let h=e=>{let t=e.from===s;switch(e.type){case"image":return(0,r.jsx)(k,{el:e,Outgoing:t,sendAt:e.sendAt,userMessage:e,onDeleteMessage:c},e.id);case"doc":return(0,r.jsx)(y,{el:e},e.id);case"link":return(0,r.jsx)(C,{el:e},e.id);case"reply":return(0,r.jsx)(Z,{el:e},e.id);case"text":return(0,r.jsx)(R,{el:e,Outgoing:t,sendAt:e.sendAt,userMessage:e,onDeleteMessage:c},e.id);case"audio":return(0,r.jsx)(A,{el:e,Outgoing:t,sendAt:e.sendAt,userMessage:e,onDeleteMessage:c},e.id);case"video":return(0,r.jsx)(F,{el:e,Outgoing:t,sendAt:e.sendAt,userMessage:e,onDeleteMessage:c},e.id);default:return(0,r.jsx)(R,{el:e,Outgoing:t,userMessage:e.message},e.id)}};return(0,r.jsx)(i.Z,{p:3,id:"Chat-scroll-bar",style:{overflowY:"scroll"},children:(0,r.jsx)(n.Z,{spacing:3,children:(0,r.jsx)(l.Fragment,{id:"Chat-scroll-bar",ref:d,children:(()=>{let t=x(e);return t.map(e=>{let{label:t,messages:s}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(i.Z,{sx:{textAlign:"center",color:"gray",position:"relative",marginTop:"10px",marginBottom:"10px"},children:t}),(0,r.jsx)(n.Z,{spacing:3,children:(0,r.jsx)(l.Fragment,{children:s.map(h)})})]},t)})})()})})})}}}]);