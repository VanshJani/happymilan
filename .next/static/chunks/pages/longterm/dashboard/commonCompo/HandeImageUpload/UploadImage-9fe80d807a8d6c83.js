(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153,5877],{9581:function(e,t,o){"use strict";o.d(t,{Z:function(){return v}});var r=o(63366),a=o(87462),n=o(67294),s=o(90512),i=o(94780),l=o(90948),c=o(71657),d=o(1588),p=o(34867);function h(e){return(0,p.Z)("MuiDialogContent",e)}(0,d.Z)("MuiDialogContent",["root","dividers"]);let x=(0,d.Z)("MuiDialogTitle",["root"]);var f=o(85893);let u=["className","dividers"],g=e=>{let{classes:t,dividers:o}=e;return(0,i.Z)({root:["root",o&&"dividers"]},h,t)},m=(0,l.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>(0,a.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${x.root} + &`]:{paddingTop:0}})),y=n.forwardRef(function(e,t){let o=(0,c.Z)({props:e,name:"MuiDialogContent"}),{className:n,dividers:i=!1}=o,l=(0,r.Z)(o,u),d=(0,a.Z)({},o,{dividers:i}),p=g(d);return(0,f.jsx)(m,(0,a.Z)({className:(0,s.Z)(p.root,n),ownerState:d,ref:t},l))});var v=y},60231:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/longterm/dashboard/commonCompo/HandeImageUpload/UploadImage",function(){return o(65877)}])},65877:function(e,t,o){"use strict";o.r(t);var r=o(85893),a=o(83501),n=o(9581),s=o(25675),i=o.n(s),l=o(67294),c=o(47041),d=o(32512),p=o(2664),h=o(7354),x=o(60530),f=o(99419);t.default=(0,p.$j)(e=>({formData:e.form.formData}),{updateFormData:h.Zv})(function(e){let{formData:t,updateFormData:o,openUpload:s,handleCloseUpload:h}=e,u={fontFamily:"Poppins",fontSize:"24px",fontStyle:"normal",fontWeight:"400",lineHeight:"32px"},g={fontFamily:"Poppins",fontSize:"15px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},m={fontFamily:"Poppins",fontSize:"16px",fontStyle:"normal",fontWeight:"400",lineHeight:"32px"},y={fontFamily:"Poppins",fontSize:"10px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},v={fontFamily:"Poppins",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"normal"},[F,j]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=(0,c.getCookie)("userName");j(e)},[]);let[b,w]=(0,l.useState)(1),[N,k]=(0,l.useState)([]),{userProfile:S,status:P}=(0,p.v9)(e=>{var t;return null===(t=e.form)||void 0===t?void 0:t.formData}),C=(0,p.I0)(),T=()=>{h(),N.length>0||w(1)},Z=(0,l.useCallback)(e=>{if(e.length>5){alert("Please select only 5 images");return}let r=Array.from(e).map((e,t)=>({id:t,key:e.name,contentType:e.type,data:URL.createObjectURL(e),isProfile:!1}));k(e=>[...e,...r]),e.forEach(e=>{let a=new FileReader;a.onabort=()=>console.log("file reading was aborted"),a.onerror=()=>console.log("file reading has failed"),a.onload=()=>{o({...t,userProfile:{...t.userProfile,images:[...r],bufferdata:URL.createObjectURL(e)}}),w(b+1)},a.readAsArrayBuffer(e)})},[]),D=()=>{let{getRootProps:e,getInputProps:t}=(0,d.uI)({onDrop:Z});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center space-y-[20px] w-[526px] h-[330px] dark:bg-[#242526] bg-[#F5F5F5] rounded-[10px]",children:[(0,r.jsx)("div",{...e(),children:(0,r.jsx)(i(),{alt:"drag-drop",width:63,height:44,src:"/loginassests/register-icons/Drag-Drop.svg"})}),(0,r.jsx)("input",{...t(),className:"hidden"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"dark:text-[#FFF] text-[#000]",style:u,children:"Select Photos"}),(0,r.jsx)("p",{className:"dark:text-[#FFF] text-[#000]",style:m,children:"Or drag and drop a file"})]})]})})},H=e=>{let t=N.filter(t=>t.data!==e);k(t)},E=()=>{let{getRootProps:e,getInputProps:t}=(0,d.uI)({onDrop:Z});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"w-[526px] h-[330px] bg-[#F5F5F5] dark:bg-[#242526] rounded-[10px]",children:(0,r.jsxs)("div",{className:"flex space-x-[20px]",children:[N.map((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"cursor-pointer w-[150px] h-[150px] lg:w-[130px] lg:h-[130px] rounded-[10px] mt-[10px] ml-[10px]",style:{backgroundImage:"url(".concat(e.data,")"),backgroundSize:"cover",backgroundPosition:"center"},id:"photo-grid-item",children:(0,r.jsxs)("svg",{onClick:()=>H(e.data),className:"z-[1] cursor-pointer relative ml-[80%] lg:ml-[78%] mt-[5%]",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"black","fill-opacity":"0.4"}),(0,r.jsx)("path",{d:"M14.1111 10.3333V15.8889H9.66667V10.3333H14.1111ZM13.2778 7H10.5L9.94444 7.55556H8V8.66667H15.7778V7.55556H13.8333L13.2778 7ZM15.2222 9.22222H8.55556V15.8889C8.55556 16.5 9.05556 17 9.66667 17H14.1111C14.7222 17 15.2222 16.5 15.2222 15.8889V9.22222Z",fill:"white"})]})},t)})),(0,r.jsxs)("div",{className:"mt-[10px] h-[130px] w-[130px]  rounded-[10px] flex flex-col justify-center items-center dark:bg-[#303133]  bg-[#EBEBEB]",children:[(0,r.jsx)("div",{...e(),children:(0,r.jsx)(i(),{alt:"drag-drop",width:35,height:35,src:"/loginassests/register-icons/Drag-Drop.svg"})}),(0,r.jsx)("input",{...t(),className:"hidden"}),(0,r.jsxs)("div",{className:"text-center mt-[5px]",children:[(0,r.jsx)("h1",{className:"dark:text-[#FFF] text-[#000]",style:g,children:"Select Photos"}),(0,r.jsx)("p",{className:"dark:text-[#FFF] text-[#000]",style:y,children:"Or drag and drop a file"})]})]})]})})})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{open:s,onClose:h,className:"flex justify-center",children:(0,r.jsx)(n.Z,{className:"dark:bg-[#303133] ",children:(0,r.jsxs)("div",{className:"space-y-[20px]",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"dark:text-[#FFF]",style:{fontFamily:"Poppins",fontSize:"18px",fontStyle:"normal",fontWeight:"500",lineHeight:"normal"},children:"Upload Photo"})}),(0,r.jsx)("div",{children:(0,r.jsx)("img",{alt:"close-icon",onClick:T,className:"w-[24px] h-[24px] cursor-pointer",src:"/assests/social/close.svg"})})]}),(0,r.jsxs)("div",{className:"",children:[(()=>{switch(b){case 1:return(0,r.jsx)(D,{});case 2:return(0,r.jsx)(E,{});default:return null}})(),(0,r.jsxs)("div",{className:"pt-[20px] flex space-x-[28px] justify-center",children:[(0,r.jsx)("button",{style:v,onClick:T,className:"w-[126px] h-[44px] rounded-[24px] hover:bg-[#F3F8FF] bg-[#FFF] border-[1px] border-[#0F52BA] text-[#000]",children:"Close"}),(0,r.jsx)("button",{id:"grad-btn",style:v,onClick:()=>{w(b+1),2===b&&(h(),console.log(N),C((0,x.U)(S)),setTimeout(()=>{C((0,f.di)()),o({...t,userProfile:{...t.userProfile,images:[],bufferdata:""}}),k([])},2e3),w(1))},className:"w-[126px] h-[44px] rounded-[24px] bg-[#0F52BA] border-[1px] border-[#0F52BA] text-[#FFF]",children:"Publish"})]})]})]})})})})})},60530:function(e,t,o){"use strict";o.d(t,{U:function(){return s}});var r=o(96319),a=o(82562),n=o(47041);let s=(0,r.hg)("register/ImageUpload",async(e,t)=>{try{t.dispatch((0,a.yI)()),e.images.forEach(t=>{let r=(0,n.getCookie)("authtoken");"video/mp4"==t.contentType?console.log("Video File"):console.log("Image File");let a={key:t.key,contentType:t.contentType,isProfilePic:t.isProfile,profileType:"video/mp4"==t.contentType?"profileVideo":"profileImage"},s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)};fetch("".concat("https://stag.mntech.website/api","/v1/s3/presignedurl/"),s).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(r=>{console.log(JSON.stringify(r)),"Success"===r.status?(console.log("After Success",r.data.url),console.log("Buffer data : ",e.bufferdata),(0,n.getCookie)("authtoken"),fetch(t.data).then(e=>e.blob()).then(e=>{let a=new FormData;a.append("image",e);let n=o(97218),s={method:"put",maxBodyLength:1/0,url:r.data.url,headers:{"Content-Type":t.contentType,"x-amz-acl":"public-read"},data:e};n.request(s).then(e=>{console.log(JSON.stringify(e.data))}).catch(e=>{console.log(e)})}).catch(e=>{console.error("There was a problem with your fetch operation:",e)})):console.log("ERROR")}).catch(e=>{console.error("There was a problem with your fetch operation:",e)})}),console.log("Waiting for images..."),t.dispatch((0,a.mt)())}catch(e){t.dispatch((0,a.vp)())}})}},function(e){e.O(0,[5675,5260,2502,1908,5277,3501,2512,9774,2888,179],function(){return e(e.s=60231)}),_N_E=e.O()}]);